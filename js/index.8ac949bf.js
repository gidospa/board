(function(e){function t(t){for(var n,i,s=t[0],c=t[1],l=t[2],u=0,h=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,s=1;s<o.length;s++){var c=o[s];0!==a[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},a={index:0},r=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";o("85ec")},"1ee7":function(e,t,o){e.exports=o.p+"img/field.b56777bb.jpg"},"22d7":function(e,t,o){"use strict";o("be87")},"2e40":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("Storage",{attrs:{capture:e.capture,storage:e.storage,exportBoardData:e.exportBoardData,clearBoardList:e.clearBoardList,clearAccesskey:e.clearAccesskey,hidden:e.hideSettings},on:{"change-storage":e.changeStorage,"capture-board":e.captureBoard,"import-board":e.importBoard,"export-board":e.exportBoard,"clear-local-storage":e.clearLocalStorage}}),o("Files",{attrs:{storage:e.storage,hidden:e.hideSettings},on:{"save-board":e.saveBoard,"click-icon":e.onClickIcon,"open-new-board":e.openNewBoard}}),o("Lineup",{attrs:{lineup:e.lineup,colors:e.colors,playerdb:e.playerDB,hidden:e.hideSettings},on:{"change-lineup":e.changeLineup,"change-team-colors":e.changeTeamColors,"change-ends":e.changeEnds,"show-team-id":e.showTeamId,"load-player-db":e.loadPlayerDB}}),o("Board",{attrs:{colors:e.colors,save:e.doSave,capture:e.doCapture,playerInfo:e.players},on:{"update-player-position":e.updatePlayerPosition,"change-player-info":e.changePlayerInfo,"change-team-colors":e.changeTeamColors,"done-save":e.doneSave,"done-capture":e.doneCapture,"hide-settings":function(t){e.hideSettings=!e.hideSettings}}}),e.showModal?o("Modal",{attrs:{type:e.modalType,board:e.modalParam},on:{close:e.closeModal}}):e._e()],1)},r=[],i=o("b85c"),s=(o("e9c4"),o("ac1f"),o("1276"),o("d3b7"),o("159b"),o("b0c0"),o("a434"),o("d81d"),o("a9e3"),o("99af"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"view"}},[n("svg",{attrs:{id:"field",width:e.screenWidth,height:e.screenHeight}},[n("image",{attrs:{href:o("1ee7"),transform:e.fieldRotate,x:"0",y:"0",width:e.fieldWidth,height:e.fieldHeight},on:{mousedown:e.fieldMouseDown,touchstart:e.fieldTouchStart}}),e._l(e.players,(function(t){return n("g",{key:t.team+":"+t.id,attrs:{transform:"translate("+t.cx+","+t.cy+")",visibility:e.visibility[t.team][t.id]},on:{mousedown:function(o){return e.mouseDown(o,t.team,t.id)},touchstart:function(o){return e.touchStart(o,t.team,t.id)}}},[n("text",{staticClass:"player name",attrs:{x:"0",y:1.2*e.playerSize,"font-size":.7*e.fontSize}},[e._v(e._s(t.name))]),n("circle",{staticClass:"player shadow",attrs:{cx:e.playerSize/10,cy:e.playerSize/10,r:e.playerSize}}),n("circle",{staticClass:"player body",attrs:{cx:"0",cy:"0",r:e.playerSize,stroke:"#333","stroke-width":"2",fill:e.teamColor[t.team]}}),n("text",{staticClass:"player number",attrs:{x:"0",y:"0","font-size":e.fontSize}},[e._v(e._s(t.number))])])}))],2)])}),c=[],l=(o("498a"),o("cb29"),"0.9.4"),d=256,u=1920,h="board_",p="lastField",f="boardList",g="fields",v="playerDB",m="board",y="playerdb",b={TOUCH_LINE:105,GOAL_LINE:68,PENALTY_BOX:{h:40.4,w:16.5},GOAL_AREA:{h:18.4,w:5.5},CENTER_CIRCLE_R:9.15,GOAL:{w:7.32,d:1.6},LINE_WIDTH:.12},w=18,C=2,S=["none","3-4-3","4-3-3","4-4-2","5-4-1"],I="#FF0000,#0000FF",x=.8,k={WIDTH:1280,HEIGHT:960,FONT_SIZE:28,PLAYER_SIZE:30};k.FIELD={w:k.WIDTH/22*20},k.FIELD.h=b.GOAL_LINE/b.TOUCH_LINE*k.FIELD.w,k.MARGIN={TOP:25,BOTTOM:25,LEFT:k.WIDTH/22,RIGHT:k.WIDTH/22},k.BENCH={LEFT:0,TOP:k.MARGIN.TOP+k.FIELD.h+k.MARGIN.BOTTOM,w:k.WIDTH,h:k.HEIGHT-k.FIELD.h-k.MARGIN.TOP-k.MARGIN.BOTTOM},k.CENTERMARK={LEFT:k.WIDTH/2,TOP:k.MARGIN.TOP+k.FIELD.h/2},k.SIZE={false:{w:k.WIDTH,h:k.HEIGHT},true:{w:k.WIDTH,h:k.HEIGHT-k.BENCH.h}},k.ASPECT={false:k.SIZE[!1].w/k.SIZE[!1].h,true:k.SIZE[!0].w/k.SIZE[!0].h};var _={WIDTH:1,HEIGHT:k.HEIGHT/k.WIDTH,FIELD:{w:k.FIELD.w/k.WIDTH,h:k.FIELD.h/k.WIDTH},FONT_SIZE:k.FONT_SIZE/k.WIDTH,PLAYER_SIZE:k.PLAYER_SIZE/k.WIDTH,MARGIN:{TOP:k.MARGIN.TOP/k.WIDTH,BOTTOM:k.MARGIN.BOTTOM/k.WIDTH,LEFT:k.MARGIN.LEFT/k.WIDTH,RIGHT:k.MARGIN.RIGHT/k.WIDTH}};_.CENTERMARK={LEFT:_.WIDTH/2,TOP:_.MARGIN.TOP+_.FIELD.h/2},_.BENCH={LEFT:k.BENCH.LEFT/k.WIDTH,TOP:k.BENCH.TOP/k.WIDTH,w:k.BENCH.w/k.WIDTH,h:k.BENCH.h/k.WIDTH};var T=o("1ee7");function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teams,o=e.w,n=e.onLoad,a=e.isLandscape,r=void 0===a||a,s=e.noBench,c=void 0!==s&&s,l=new Image;l.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d"),s=null,d=null;r?(e.width=o,e.height=o/k.ASPECT[c],s=o,d=o/k.ASPECT[c],a.drawImage(l,0,0,k.SIZE[c].w,k.SIZE[c].h,0,0,s,d)):(e.width=o,e.height=k.ASPECT[c]*o,s=k.ASPECT[c]*o,d=o,a.save(),a.rotate(-90*Math.PI/180),a.translate(-s,0),a.drawImage(l,0,0,k.SIZE[c].w,k.SIZE[c].h,0,0,s,d),a.restore());var u,h=_.PLAYER_SIZE*s,p=_.FONT_SIZE*s,f=Object(i["a"])(t.players);try{for(f.s();!(u=f.n()).done;){var g=u.value;if(!(c&&g.y>_.BENCH.TOP)){var v=0,m=0;r?(v=s*g.x,m=s*g.y):(v=s*g.y,m=s-s*g.x),a.beginPath(),a.fillStyle="rgba(10, 10, 10, 0.3)",a.arc(v+3,m+3,h,0,2*Math.PI,!1),a.fill(),a.beginPath(),a.lineWidth=2,a.strokeStyle="rgba(10, 10, 10, 0.5)",a.fillStyle=t.color[g.team],a.arc(v,m,h,0,2*Math.PI,!1),a.fill(),a.stroke(),a.closePath(),a.textAlign="center",a.textBaseline="middle",a.font=p+'px "Yu Gothic", "YuGothic", "Arial"',a.fillStyle="#fff",a.fillText(g.number,v,m),g.name&&(a.textAlign="center",a.textBaseline="middle",a.font=parseInt(.7*p)+'px "Yu Gothic", "YuGothic", "Arial"',a.fillStyle="rgba(255,255,255,1.0)",a.fillText(g.name,v,m+h+p/2))}}}catch(y){f.e(y)}finally{f.f()}n(e.toDataURL()),console.log("capture load image....")},l.onerror=function(e){console.log(e)},l.src=T}var B={capture:E};o("fb6a"),o("25f0"),o("a15b");function P(e){for(var t="",o=",",n=0;n<e.length;n++){var a=e[n].split("(")[1].split(")")[0].split(",");t+="#";for(var r=0;r<3;r++)t+="0".concat(parseInt(a[r]).toString(16)).slice(-2);t+=o,o=""}return t}function D(e){var t=e.split(",");if(2==t.length){var o=[parseInt(t[0].substring(1,3),16),parseInt(t[0].substring(3,5),16),parseInt(t[0].substring(5,7),16)],n=[parseInt(t[1].substring(1,3),16),parseInt(t[1].substring(3,5),16),parseInt(t[1].substring(5,7),16)];return["rgba(".concat(o.join(","),", ").concat(x,")"),"rgba(".concat(n.join(","),", ").concat(x,")")]}}var O={props:{colors:String,save:Object,capture:Object,playerInfo:Array},data:function(){return{screenWidth:800,screenHeight:600,playerSize:30,fontSize:30,fontColor:"".concat(this.color),players:[],visibility:[[],[]],teamColor:["rgba(255, 0, 0, 0.8)","rgba(0, 0, 255, 0.8)"],selectedPlayer:null,startOffset:null,noBench:!1,isLandscape:null,fieldRotate:null,fieldWidth:null,fieldHeight:null,isClick:!1,fieldClick:null}},methods:{getCursorPosition:function(e){var t=document.getElementById("field").getBoundingClientRect(),o=Math.round(e.clientX-t.left),n=Math.round(e.clientY-t.top);return{x:o,y:n}},getTouchPosition:function(e){var t=document.getElementById("field").getBoundingClientRect(),o=Math.round(e.touches[0].clientX-t.left),n=Math.round(e.touches[0].clientY-t.top);return{x:o,y:n}},getIndex:function(e,t){for(var o=0;o<this.players.length;o++)if(this.players[o].id==t&&this.players[o].team==e)break;return o==this.players.length?null:o},mouseDown:function(e,t,o){console.log(e.type);var n=this.getCursorPosition(e);this.touchPlayer(t,o,n),this.isClick=!0},touchStart:function(e,t,o){console.log(e.type),e.preventDefault();var n=this.getTouchPosition(e);this.touchPlayer(t,o,n),this.isClick=!0},touchPlayer:function(e,t,o){console.log("touch player("+e+":"+t+")",o);var n=this.getIndex(e,t);null!=n?(this.selectedPlayer=this.players[n],this.players.splice(n,1),this.players.push(this.selectedPlayer),this.startOffset=o,this.startOffset.x-=this.selectedPlayer.cx,this.startOffset.y-=this.selectedPlayer.cy):console.log("player ".concat(e,":").concat(t," not found"))},mouseMove:function(e){this.selectedPlayer&&(console.log("mouseMove",e.type),this.movePlayer(this.getCursorPosition(e))),this.isClick=!1,this.fieldClick=!1},touchMove:function(e){this.selectedPlayer&&(console.log("touchMove",e.type),this.movePlayer(this.getTouchPosition(e))),this.isClick=!1,this.fieldClick=!1},movePlayer:function(e){this.selectedPlayer&&(this.selectedPlayer.cx=e.x-this.startOffset.x,this.selectedPlayer.cy=e.y-this.startOffset.y,this.selectedPlayer.cx<0&&(this.selectedPlayer.cx=0),this.selectedPlayer.cy<0&&(this.selectedPlayer.cy=0),this.selectedPlayer.cx>this.screenWidth&&(this.selectedPlayer.cx=this.screenWidth),this.selectedPlayer.cy>this.screenHeight&&(this.selectedPlayer.cy=this.screenHeight),this.isLandscape?(this.selectedPlayer.x=this.selectedPlayer.cx/this.screenWidth,this.selectedPlayer.y=this.selectedPlayer.cy/this.screenWidth):(this.selectedPlayer.x=(this.screenHeight-this.selectedPlayer.cy)/this.screenHeight,this.selectedPlayer.y=this.selectedPlayer.cx/this.screenHeight))},click:function(){if(this.isClick&&(this.isClick=!1,this.inputPlayerName()),this.selectedPlayer=null,this.moveStart=null,this.fieldClick){console.log("field click!!",this.fieldClick);var e=this.isLandscape?this.fieldClick.y:this.fieldClick.x;e>(_.FIELD.h+_.MARGIN.TOP)*this.fieldWidth?(this.noBench=!this.noBench,this.screenResize()):this.$emit("hide-settings")}this.fieldClick=null},mouseUp:function(){this.selectedPlayer&&this.$emit("update-player-position",this.players),(this.selectedPlayer||this.fieldClick)&&(console.log("mouseUp"),this.click())},inputPlayerName:function(){console.log("click: ",this.selectedPlayer);var e=this.selectedPlayer.number+",";this.selectedPlayer.name&&(e+=this.selectedPlayer.name);var t=window.prompt("Change player's number and name",e);if(t){var o=t.split(","),n=parseInt(o[0]),a="";n&&(o.length>1&&(a=o[1].trim()),this.$emit("change-player-info",this.selectedPlayer,n,a))}},fieldMouseDown:function(e){console.log("field mouse:",e.type),this.fieldClick=this.getCursorPosition(e)},fieldTouchStart:function(e){console.log("field touch:",e.type),e.preventDefault(),this.fieldClick=this.getTouchPosition(e)},screenResize:function(){var e=.99*document.body.clientWidth,t=.98*document.documentElement.clientHeight;if(console.log("screenResize: ",e,t),e>t?(console.log("landscape"),this.isLandscape=!0,e/t<k.ASPECT[this.noBench]?(this.screenWidth=e,this.screenHeight=e/k.ASPECT[this.noBench]):(this.screenWidth=t*k.ASPECT[this.noBench],this.screenHeight=t)):(console.log("portrate"),this.isLandscape=!1,t/e<k.ASPECT[this.noBench]?(this.screenWidth=t/k.ASPECT[this.noBench],this.screenHeight=t):(this.screenWidth=e,this.screenHeight=e*k.ASPECT[this.noBench])),this.isLandscape){var o,n=Object(i["a"])(this.players);try{for(n.s();!(o=n.n()).done;){var a=o.value;this.noBench&&a.y>_.BENCH.TOP?this.visibility[a.team][a.id]="hidden":this.visibility[a.team][a.id]="visible",a.cx=a.x*this.screenWidth,a.cy=a.y*this.screenWidth}}catch(l){n.e(l)}finally{n.f()}this.fieldRotate="rotate(0, 0, 0) translate(0,0)",this.fieldWidth=this.screenWidth,this.fieldHeight=this.fieldWidth/k.ASPECT[!1]}else{var r,s=Object(i["a"])(this.players);try{for(s.s();!(r=s.n()).done;){var c=r.value;this.noBench&&c.y>_.BENCH.TOP?this.visibility[c.team][c.id]="hidden":this.visibility[c.team][c.id]="visible",c.cx=c.y*this.screenHeight,c.cy=this.screenHeight-c.x*this.screenHeight}}catch(l){s.e(l)}finally{s.f()}this.fieldRotate="rotate(-90, 0, 0) translate(".concat(-this.screenHeight,",0)"),this.fieldWidth=this.screenHeight,this.fieldHeight=this.fieldWidth/k.ASPECT[!1]}this.playerSize=_.PLAYER_SIZE*this.fieldWidth,this.fontSize=_.FONT_SIZE*this.fieldWidth,console.log("screen: ",this.screenWidth,this.screenHeight),console.log("field: ",this.fieldWidth,this.fieldHeight)}},created:function(){this.players=this.playerInfo,this.teamColor=D(this.colors),this.visibility.forEach((function(e){for(var t=0;t<w;t++)e.push("visibile")}))},mounted:function(){document.addEventListener("mouseup",this.mouseUp),document.addEventListener("touchend",this.mouseUp),document.addEventListener("mousemove",this.mouseMove),document.addEventListener("touchmove",this.touchMove),window.addEventListener("resize",this.screenResize),this.screenResize()},watch:{playerInfo:function(){console.log("update playerInfo:"),this.players=this.playerInfo,this.screenResize()},colors:function(e){console.log("get colors"),this.teamColor=D(e)},save:function(){var e=this;B.capture({teams:{players:this.players,color:this.teamColor},w:d,onLoad:function(t){var o=new Date;e.$emit("done-save",{players:e.players,color:e.teamColor,icon:t,timestamp:o.toLocaleString()})},isLandscape:!0,noBench:!1})},capture:function(){var e=this;B.capture({teams:{players:this.players,color:this.teamColor},w:u,onLoad:function(t){e.$emit("done-capture",t)},isLandscape:this.isLandscape,noBench:this.noBench})}}},A=O,L=(o("e689"),o("2877")),N=Object(L["a"])(A,s,c,!1,null,"1ea34b18",null),R=N.exports,H=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.hidden?"hidden":"",attrs:{id:"lineup"}},[o("div",{on:{dragover:function(t){return t.preventDefault(),e.onDragOver.apply(null,arguments)},dragleave:e.onDragLeave,drop:function(t){return t.stopPropagation(),t.preventDefault(),e.onDropPlayerDB.apply(null,arguments)}}},[o("div",{attrs:{id:"player-db-information"}},[o("div",{class:{"player-db-information__dragover":e.isDragOver}},[o("span",{staticClass:"player-db-information__text",on:{click:function(t){return e.$emit("show-team-id")}}},[e._v("Player DB")])])]),o("div",{staticClass:"lineup"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.homeColor,expression:"homeColor"}],staticClass:"team-color",attrs:{type:"color",list:"colorList"},domProps:{value:e.homeColor},on:{input:function(t){t.target.composing||(e.homeColor=t.target.value)}}})]),o("div",{staticClass:"lineup"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.home,expression:"home"}],attrs:{spellcheck:"false"},domProps:{value:e.home},on:{blur:function(t){return e.onBlur()},input:function(t){t.target.composing||(e.home=t.target.value)}}})]),o("div",{staticClass:"lineup"},[o("button",{staticClass:"default-button",attrs:{type:"button",onfocus:"this.blur()",id:"changing-ends"},on:{click:e.onClickChange}},[e._v("Changing ends")])]),o("div",{staticClass:"lineup"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.away,expression:"away"}],attrs:{spellcheck:"false"},domProps:{value:e.away},on:{blur:function(t){return e.onBlur()},input:function(t){t.target.composing||(e.away=t.target.value)}}})]),o("div",{staticClass:"lineup"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.awayColor,expression:"awayColor"}],staticClass:"team-color",attrs:{type:"color",list:"colorList"},domProps:{value:e.awayColor},on:{input:function(t){t.target.composing||(e.awayColor=t.target.value)}}})]),e._m(0)])])},M=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("datalist",{attrs:{id:"colorList"}},[o("option",[e._v("#000000")]),o("option",[e._v("#ffffff")]),o("option",[e._v("#ff0000")]),o("option",[e._v("#dd3300")]),o("option",[e._v("#ff8000")]),o("option",[e._v("#00cc00")]),o("option",[e._v("#ffcc00")]),o("option",[e._v("#ff0066")]),o("option",[e._v("#cc0044")]),o("option",[e._v("#880011")]),o("option",[e._v("#006600")]),o("option",[e._v("#113355")]),o("option",[e._v("#8000ff")]),o("option",[e._v("#0000ff")]),o("option",[e._v("#0080ff")])])}],j=(o("466d"),o("b64b"),{props:{lineup:String,colors:String,playerdb:Object,hidden:Boolean},data:function(){return{home:"",away:"",homeColor:"#ff0000",awayColor:"#0000ff",isDragOver:!1}},methods:{onBlur:function(){if(!this.home.match(/\S/g)||!this.away.match(/\S/g)){var e=this.lineup.split("\n\n");return this.home=e[0],void(this.away=e[1])}for(var t=[this.home,this.away],o="",n=[],a=0,r=t;a<r.length;a++){var s=r[a],c=s.split("\n");n.push(c[0]);var l,d=Object(i["a"])(c);try{for(d.s();!(l=d.n()).done;){var u=l.value,h=u.split(","),p=parseInt(h[0]);if(p){var f="";h[1]&&(f=h[1].trim()),o+="".concat(p,",").concat(f,"\n")}}}catch(v){d.e(v)}finally{d.f()}""==o&&(o+="\n"),o+="\n"}var g=this.lineup.split("\n\n");this.home=g[0],this.away=g[1],this.$emit("change-lineup",o,n)},onClickChange:function(){this.$emit("change-ends")},onDragOver:function(){if(!this.playerdb){this.isDragOver=!0;var e=document.getElementById("player-db-information");e.style.visibility="visible"}},onDragLeave:function(){if(this.isDragOver=!1,!this.playerdb){var e=document.getElementById("player-db-information");e.style.visibility="hidden"}},onDropPlayerDB:function(e){var t=this;if(console.log("drop file:",e.dataTransfer.files),this.onDragLeave(),this.playerdb)console.log("player db already exists");else{var o=e.dataTransfer.files[0],n=new FileReader;n.onload=function(){try{var e=JSON.parse(n.result);if(console.log("version: ".concat(e.version,", teams: ").concat(e.teams)),e.version&&e.teams){var o=Object.keys(e.teams),a=0;for(a=0;a<o.length;a++){var r=o[a],i=e.teams[r];if(!i.nationality||!i.category||!i.players){console.log("playerDB format error:",r),console.log("  nationality:",i.nationality),console.log("  category:",i.category),console.log("  players:",i.players);break}}a==o.length&&(console.log("playerDB updated"),t.$emit("load-player-db",e))}else console.log("cannot read playerDB file")}catch(s){console.log(s)}},n.readAsText(o)}}},created:function(){var e=this.lineup.split("\n\n");this.home=e[0],this.away=e[1];var t=this.colors.split(",");this.homeColor=t[0],this.awayColor=t[1]},watch:{lineup:function(e){var t=e.split("\n\n");this.home=t[0],this.away=t[1]},colors:function(){var e=this.colors.split(",");this.homeColor=e[0],this.awayColor=e[1]},homeColor:function(){this.$emit("change-team-colors","".concat(this.homeColor,",").concat(this.awayColor))},awayColor:function(){this.$emit("change-team-colors","".concat(this.homeColor,",").concat(this.awayColor))},playerdb:function(){var e=document.getElementById("player-db-information");this.playerdb?(console.log("playerDB visible"),e.style.visibility="visible"):(console.log("playerDB hidden"),e.style.visibility="hidden")}}}),F=j,W=(o("e39a"),Object(L["a"])(F,H,M,!1,null,"520c5ad0",null)),G=W.exports,$=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.hidden?"hidden":"",attrs:{id:"files"}},[o("div",{staticClass:"icon",attrs:{id:"append-mark"},on:{click:function(t){return e.$emit("save-board")}}},[e._v("+")]),o("div",{staticClass:"icon",attrs:{id:"open-new-board"},on:{click:function(t){return e.$emit("open-new-board")}}},[e._v("New")]),o("div",{attrs:{id:"saved-board-icon"}},e._l(e.boardStorage,(function(t,n){return o("img",{key:t.timestamp+n,staticClass:"icon",attrs:{src:t.icon},on:{click:function(t){return e.onClickIcon(n)}}})})),0)])},J=[],U={props:{storage:Array,hidden:Boolean},data:function(){return{boardStorage:[]}},methods:{onClickIcon:function(e){console.log("click icon",e),this.$emit("click-icon",e)}},watch:{storage:function(){console.log("update boards list"),this.boardStorage=this.storage}}},z=U,Z=(o("c9e5"),Object(L["a"])(z,$,J,!1,null,null,null)),Y=Z.exports,q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.hidden?"hidden":"",attrs:{id:"storage"}},[o("div",{staticClass:"storage-button"},[o("label",{attrs:{for:"import-board"}},[e._v("Import")]),o("input",{staticStyle:{display:"none"},attrs:{id:"import-board",type:"file",accept:"text/plain, application/json"},on:{change:e.onImport}})]),o("div",{staticClass:"storage-button",on:{click:function(t){return e.$emit("export-board")}}},[e._v(" Export ")]),o("div",{staticClass:"storage-button",on:{click:function(t){return e.$emit("capture-board")}}},[e._v(" Capture ")]),o("span",{staticClass:"blank"},[e._v(" ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isDropboxAvailable,expression:"isDropboxAvailable"}],staticClass:"storage-button",attrs:{id:"dropbox"},on:{click:e.dropboxStorage}},[e._v(" Dropbox ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isGoogleAvailable,expression:"isGoogleAvailable"}],staticClass:"storage-button",attrs:{id:"google"},on:{click:e.googleStorage}},[e._v(" Google ")]),o("div",{staticClass:"storage-button",attrs:{id:"clear-local-storage"},on:{click:function(t){return e.$emit("clear-local-storage")}}},[e._v(" Clear ")])])},K=[],X=(o("3ca3"),o("ddb0"),o("2b3d"),o("9861"),o("1da1")),Q=(o("96cf"),o("5319"),{}.toString);function V(e){return"[object Function]"==Q.call(e)}function ee(e){return"[object String]"==Q.call(e)}function te(e){return"[object Object]"==Q.call(e)}function oe(){return window.location.hash.replace(/^#/,"").split("&").reduce((function(e,t){return""==t||(t=t.split("="),e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])),e}),{})}var ne="https://api.dropboxapi.com/2/",ae="https://content.dropboxapi.com/2/",re=function(e,t){return arguments.length>1?localStorage[e]=t:localStorage[e]},ie=void 0,se={"auth/token/revoke":{contentType:null},"files/upload":{baseUri:ae,format:"content-upload"},"files/get_thumbnail":{baseUri:ae,format:"content-download"},"files/download":{baseUri:ae,format:"content-download"},"files/get_preview":{baseUri:ae,format:"content-download"},"files/upload_session/append":{baseUri:ae,format:"content-upload"},"files/upload_session/append_v2":{baseUri:ae,format:"content-upload"},"files/upload_session/finish":{baseUri:ae,format:"content-upload"},"files/upload_session/start":{baseUri:ae,format:"content-upload"},"files/get_shared_link_file":{baseUri:ae,format:"content-download"}},ce={rpc:"application/json","content-upload":"application/octet-stream"};function le(e,t){var o=[].slice.call(arguments),n=se[e]||{},a=n.baseUri||ne,r=n.format||"rpc",i=n.contentType||null===n.contentType?null:ce[r],s=o[o.length-1],c=o.length>2&&(te(s)||V(s))?s:{};V(c)&&(c={onComplete:c});var l=null,d={};Promise&&(l=new Promise((function(e,t){d.resolve=e,d.reject=t})));var u=new XMLHttpRequest;u.open("POST",a+e,!0),u.setRequestHeader("Authorization","Bearer "+(re("__dbat")||"000000000000000000000000_00000-000000000000000000000000000000000")),"content-download"==r&&(u.responseType="blob"),t&&t.responseType&&(u.responseType=t.responseType,delete t.responseType),i&&u.setRequestHeader("Content-Type",i),!t||"content-upload"!=r&&"content-download"!=r||u.setRequestHeader("Dropbox-API-Arg",JSON.stringify(t)),c.onDownloadProgress&&u.addEventListener("progress",c.onDownloadProgress),c.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",c.onUploadProgress),(c.onError||ie)&&u.addEventListener("error",(function(e){var t=c.onError&&c.onError(e.target);l&&d.reject&&d.reject(e.target),ie&&ie(e.target,t)})),u.onreadystatechange=function(){if(4==u.readyState)if(200==u.status){var t=JSON.parse(u.getResponseHeader("dropbox-api-result")||u.responseText);"auth/token/revoke"==e&&re("__dbat",""),c.onComplete&&c.onComplete(t,u.response,u),l&&d.resolve&&d.resolve(t,u.response,u)}else{var o=c.onError&&c.onError(u);l&&d.reject&&d.reject(u),ie&&ie(u,o)}};var h=o.length>2&&"content-upload"==r?o[2]:void 0;return h=h||(t&&"rpc"==r?JSON.stringify(t):null),h?u.send(h):u.send(),l}function de(){}le.setGlobalErrorHandler=function(e){ie=e},le.setTokenStore=function(e){re=e},le.authenticate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("authenticate"),V(t)&&(t={onComplete:t}),ee(e)&&(e={client_id:e}),e.redirect_uri=e.redirect_uri||window.location.href;var o=null,n={};if(Promise&&(o=new Promise((function(e,t){n.resolve=e,n.reject=t}))),re("__dbat"))return t.onComplete(),o&&n.resolve&&n.resolve(),o;var a=oe(),r=re("__dbcsrf");if(a.state&&r&&a.state==r)if(a.access_token)re("__dbat",a.access_token),re("__dbcsrf",""),window.location.replace(window.location.href.replace(/#.*/,""));else{var i=t.onError&&t.onError(a);o&&n.reject&&n.reject(a),ie&&ie(a,i)}else{var s=""+Math.floor(1e5*Math.random());re("__dbcsrf",s),window.location="https://www.dropbox.com/1/oauth2/authorize?response_type=token&client_id="+encodeURIComponent(e.client_id)+"&redirect_uri="+encodeURIComponent(e.redirect_uri)+"&state="+encodeURIComponent(s)}return o},le.checkRedirect=function(){var e=oe(),t=re("__dbcsrf"),o=re("__dbstat");if(e.state&&t&&e.state==t)e.access_token&&(re("__dbat",e.access_token),re("__dbcsrf",""),re("__dbstat","reloading"),window.location.replace(window.location.href.replace(/#.*/,"")));else if("reloading"==o)return re("__dbstat",""),!0;return!1},le.clear=function(){localStorage.removeItem("__dbat"),localStorage.removeItem("__dbcsrf"),localStorage.removeItem("__dbstat")},de.fileId={},de.getFileId=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t){var o,n,a,r,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=null,n="name = '".concat(t,"' and mimeType = 'application/json' and 'root' in parents and trashed = false"),console.log("get file list"),e.next=5,window.gapi.client.drive.files.list({q:n});case 5:a=e.sent,r=Object(i["a"])(a.result.files),e.prev=7,r.s();case 9:if((s=r.n()).done){e.next=16;break}if(c=s.value,c.name!=t){e.next=14;break}return o=c.id,e.abrupt("break",16);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](7),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return e.abrupt("return",Promise.resolve(o));case 25:case"end":return e.stop()}}),e,null,[[7,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),de.download=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t){var o,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=this.fileId[t],o){e.next=8;break}return e.next=4,this.getFileId(t);case 4:if(o=e.sent,null!=o){e.next=7;break}return e.abrupt("return",null);case 7:this.fileId[t]=o;case 8:return n={fileId:o,alt:"media"},e.next=11,window.gapi.client.drive.files.get(n);case 11:return a=e.sent,e.abrupt("return",a.body);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),de.upload=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,o){var n,a,r,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.fileId[t],n){e.next=10;break}return e.next=4,this.getFileId(t);case 4:if(n=e.sent,null!=n){e.next=9;break}return e.next=8,this.create(t);case 8:n=e.sent;case 9:this.fileId[t]=n;case 10:return a="/upload/drive/v3/files/".concat(n),r="PATCH",i={uploadType:"media"},s={},c=o,e.next=17,window.gapi.client.request({path:a,method:r,params:i,headers:s,body:c});case 17:case"end":return e.stop()}}),e,this)})));return function(t,o){return e.apply(this,arguments)}}(),de.create=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.client.drive.files.create({name:t,description:"board list for board app"});case 2:return o=e.sent,e.abrupt("return",o.result.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de.delete=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=this.fileId[t],o){e.next=7;break}return e.next=4,this.getFileId(t);case 4:if(o=e.sent,o){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,window.gapi.client.drive.files.delete({fileId:o});case 9:return n=e.sent,delete this.fileId[t],e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),de.clear=function(){window.gapi.auth2.getAuthInstance().disconnect()};var ue=[];ue.isAvailable=function(){return"available"},ue.fetch=function(e){if(console.log("load from localStorage"),g in localStorage&&(localStorage[f]=localStorage[g],delete localStorage[g]),f in localStorage){var t=JSON.parse(localStorage[f]);this.splice(0),Array.prototype.push.apply(this,t.boardStorage),console.log("load boards from localStorage")}else{var o=JSON.stringify({timestamp:(new Date).getTime(),boardStorage:[]});localStorage[f]=o,this.splice(0),console.log("create new boards at localStorage")}if(localStorage[v]){var n=JSON.parse(localStorage[v]);this.playerDB=n}else delete this.playerDB;e&&e()},ue.append=function(e,t){console.log("save to localStorage");var o=[e].concat(this),n=JSON.stringify({timestamp:(new Date).getTime(),boardStorage:o});localStorage[f]=n,this.fetch(t)},ue.remove=function(e,t){console.log("remove board at index ".concat(e," from localStorage"));var o=[].concat(this);o.splice(e,1);var n=JSON.stringify({timestamp:(new Date).getTime(),boardStorage:o});localStorage[f]=n,this.fetch(t)},ue.clear=function(){var e=JSON.stringify({timestamp:(new Date).getTime(),boardStorage:[]});localStorage[f]=e,this.splice(0),localStorage.removeItem(v),delete this.playerDB},ue.savePlayerDB=function(e,t){var o=JSON.stringify(e);localStorage.setItem(v,o),this.playerDB=e,t&&t()},ue.deletePlayerDB=function(e){localStorage.removeItem(v),delete this.playerDB,e&&e()};var he="22754353733-tih41neqptvihbgn7ftp93om63s8nr9k.apps.googleusercontent.com",pe="".concat(m,".json"),fe="".concat(y,".json"),ge=[];ge.isAvailable=function(e,t){if(!he)return"unavailable";window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:he,scope:"https://www.googleapis.com/auth/drive.file"}).then(window.gapi.client.load("drive","v3")).then((function(){e&&e()})).catch((function(e){console.log("Google Drive is not available:",e),t&&t()}))}))},ge.fetch=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,o){var n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.startConnecting&&this.startConnecting(),window.gapi.auth2.getAuthInstance().isSignedIn.get()){e.next=13;break}return e.prev=2,e.next=5,window.gapi.auth2.getAuthInstance().signIn();case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e["catch"](2),console.error(e.t0.error),this.endConnecting&&this.endConnecting(),o&&o(),e.abrupt("return");case 13:if(!window.gapi.auth2.getAuthInstance().isSignedIn.get()){e.next=43;break}return e.prev=14,e.next=17,de.download(pe);case 17:if(n=e.sent,null!=n){e.next=24;break}return e.next=21,de.upload(pe,"[]");case 21:return e.next=23,de.download(pe);case 23:n=e.sent;case 24:a=JSON.parse(n),a?(this.splice(0),Array.prototype.push.apply(this,a),t&&t()):(console.log("cannot download or create board file"),o&&o()),e.next=32;break;case 28:e.prev=28,e.t1=e["catch"](14),console.log(e.t1),o&&o();case 32:return e.prev=32,e.next=35,de.download(fe);case 35:r=e.sent,i=JSON.parse(r),i?this.playerDB=i:console.log("cannot download player DB"),e.next=43;break;case 40:e.prev=40,e.t2=e["catch"](32),console.log(e.t2);case 43:this.endConnecting&&this.endConnecting();case 44:case"end":return e.stop()}}),e,this,[[2,7],[14,28],[32,40]])})));return function(t,o){return e.apply(this,arguments)}}(),ge.append=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,o,n){var a,r,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.startConnecting&&this.startConnecting(),a=[t].concat(this),r=JSON.stringify(a),e.next=5,de.upload(pe,r);case 5:return e.next=7,de.download(pe);case 7:if(i=e.sent,s=JSON.parse(i),!s){e.next=15;break}return this.splice(0),Array.prototype.push.apply(this,s),this.endConnecting&&this.endConnecting(),o&&o(),e.abrupt("return");case 15:this.endConnecting&&this.endConnecting(),n&&n();case 17:case"end":return e.stop()}}),e,this)})));return function(t,o,n){return e.apply(this,arguments)}}(),ge.remove=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,o,n){var a,r,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.startConnecting&&this.startConnecting(),a=[].concat(this),a.splice(t,1),r=JSON.stringify(a),e.next=6,de.upload(pe,r);case 6:return e.next=8,de.download(pe);case 8:if(i=e.sent,s=JSON.parse(i),!s){e.next=16;break}return this.splice(0),Array.prototype.push.apply(this,s),this.endConnecting&&this.endConnecting(),o&&o(),e.abrupt("return");case 16:this.endConnecting&&this.endConnecting(),n&&n();case 18:case"end":return e.stop()}}),e,this)})));return function(t,o,n){return e.apply(this,arguments)}}(),ge.savePlayerDB=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,o,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.startConnecting&&this.startConnecting(),e.prev=1,a=JSON.stringify(t),e.next=5,de.upload(fe,a);case 5:this.playerDB=t,o&&o(),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0),n&&n();case 13:this.endConnecting&&this.endConnecting();case 14:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t,o,n){return e.apply(this,arguments)}}(),ge.deletePlayerDB=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.startConnecting&&this.startConnecting(),e.prev=1,e.next=4,de.delete(fe);case 4:delete this.playerDB,t&&t(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 12:this.endConnecting&&this.endConnecting();case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,o){return e.apply(this,arguments)}}(),ge.clearAccesskey=de.clear,ge.startConnecting=null,ge.endConnecting=null;var ve="chz2eiuvjxytp67",me="/".concat(m,".json"),ye="/".concat(y,".json"),be=[];be.isAvailable=function(){return console.log(ye),ve?le.checkRedirect()?(this.startConnecting&&this.startConnecting(),this.download(),"connected"):"available":"unavailable"},be.fetch=function(e,t){var o=this;this.startConnecting&&this.startConnecting();var n={client_id:ve,redirect_uri:location.href},a={onComplete:function(){console.log("complete dropbox authenticate"),o.download(e,t),console.log("download player db from dropbox"),o.downloadPlayerDB((function(e){o.playerDB=e}))},onError:function(e){console.log("incomplete dropbox authenticate"),o.endConnecting&&o.endConnecting(),t&&t(e)}};le.authenticate(n,a)},be.download=function(e,t){var o=this;console.log("download");var n={onComplete:function(n,a){o.loadBoard(n,a,e,t)},onError:function(n){switch(n.status){case 401:console.log("401 Unauthorized"),console.log("remove dropbox access token"),le.clear(),o.endConnecting&&o.endConnecting(),t&&t(n);break;case 409:console.log("create new boards"),o.createNewFile(e,t);break;default:console.log("cannot download from dropbox"),o.endConnecting&&o.endConnecting(),t&&t(n)}}};le("files/download",{path:me},n)},be.loadBoard=function(e,t,o,n){var a=new FileReader,r=this;a.addEventListener("loadend",(function(){try{var e=JSON.parse(a.result);e?(r.splice(0),Array.prototype.push.apply(r,e),r.endConnecting&&r.endConnecting(),o&&o()):(r.endConnecting&&r.endConnecting(),n&&n("parsing ".concat(me," failed")))}catch(t){r.endConnecting&&r.endConnecting(),n&&n(t)}})),a.readAsText(t)},be.createNewFile=function(e,t){var o=this;console.log("create New boards file");var n="[]",a={path:me,mode:"overwrite"},r={onComplete:function(){o.download(e,t)},onError:function(e){console.log("cannot create ".concat(me)),t&&t(e),o.endConnecting&&o.endConnecting()}};le("files/upload",a,n,r)},be.append=function(e,t,o){var n=this;this.startConnecting&&this.startConnecting();var a=[e].concat(this),r=JSON.stringify(a);this.upload(r,(function(){n.download(t,o)}),(function(e){console.log("fail to append"),n.endConnecting&&n.endConnecting(),o&&o(e)}))},be.remove=function(e,t,o){var n=this;this.startConnecting&&this.startConnecting();var a=[].concat(this);a.splice(e,1);var r=JSON.stringify(a);this.upload(r,(function(){n.download(t,o)}),(function(e){console.log("fail to append"),n.endConnecting&&n.endConnecting(),o&&o(e)}))},be.upload=function(e,t,o){var n=this,a={path:me,mode:"overwrite"},r={onComplete:function(){n.download(t,o)},onError:function(e){n.endConnecting&&n.endConnecting(),o&&o(e)}};le("files/upload",a,e,r)},be.downloadPlayerDB=function(e,t){var o={onComplete:function(o,n){var a=new FileReader;a.addEventListener("loadend",(function(){try{var o=JSON.parse(a.result);o?e&&e(o):t&&t()}catch(n){console.log("cannot parse ".concat(v,":"),n),t&&t()}})),a.readAsText(n)},onError:function(e){switch(e.status){case 401:console.log("401 Unauthorized");break;default:console.log("playerDB not found")}}};le("files/download",{path:ye},o)},be.uploadPlayerDB=function(e,t,o){var n=this,a={path:ye,mode:"overwrite"},r={onComplete:function(){n.downloadPlayerDB(t,o)},onError:function(e){console.log(e),o&&o(e)}};le("files/upload",a,e,r)},be.savePlayerDB=function(e,t,o){var n=this;console.log(e);var a=JSON.stringify(e);this.uploadPlayerDB(a,(function(e){n.playerDB=e,console.log("upload succeeded"),t&&t()}),(function(){o&&o()}))},be.deletePlayerDB=function(e,t){var o=this;console.log("deletePlayerDB"),this.uploadPlayerDB("",(function(e){console.log("cannot delete playerDB:",e),t&&t()}),(function(){delete o.playerDB,e&&e()}))},be.clearAccesskey=le.clear,be.startConnecting=null,be.endConnecting=null;var we=[];function Ce(){var e=new Date,t=e.getFullYear();return t+=("0"+(e.getMonth()+1)).slice(-2),t+=("0"+e.getDate()).slice(-2),t+="-",t+=("0"+e.getHours()).slice(-2),t+=("0"+e.getMinutes()).slice(-2),t+=("0"+e.getSeconds()).slice(-2),t}function Se(e,t){var o=document.createElement("a");o.download=e,o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}we.isAvailable=function(){return console.log("isAvailable"),"available"},we.fetch=function(e){console.log("fetch"),this.splice(0),e&&e(this)},we.append=function(e,t){console.log("append:",e),this.splice(0,0,e),t&&t(this)},we.remove=function(e,t){console.log("remove"),this.splice(e,1),t&&t(this)};var Ie={props:{capture:Object,exportBoardData:Object,clearBoardList:Object,clearAccesskey:Object,hidden:Boolean},data:function(){return{currentStorage:{},isDropboxAvailable:!1,isGoogleAvailable:!1}},methods:{googleStorage:function(e){var t=this;e.target.classList.contains("connected")?(console.log("change storage to localStorage"),this.currentStorage.disconnect&&this.currentStorage.disconnect(),this.currentStorage=ue,ue.fetch((function(){t.$emit("change-storage",t.currentStorage)}))):(console.log("change storage to Google Drive"),ge.fetch((function(){console.log("connected to Google Drive"),t.currentStorage.disconnect&&t.currentStorage.disconnect(),t.currentStorage=ge,t.currentStorage.disconnect=function(){var e=document.getElementById("google");e.classList.remove("connected")},t.$emit("change-storage",t.currentStorage);var e=document.getElementById("google");e.classList.add("connected")}),(function(e){console.log("fail to connect to Google Drive:",e)})))},dropboxStorage:function(e){var t=this;e.target.classList.contains("connected")?(console.log("change storage to localStorage"),this.currentStorage.disconnect&&this.currentStorage.disconnect(),this.currentStorage=ue,ue.fetch((function(){t.$emit("change-storage",t.currentStorage)}))):(console.log("change storage to Dropbox"),be.fetch((function(){console.log("connected to Dropbox"),t.currentStorage.disconnect&&t.currentStorage.disconnect(),t.currentStorage=be,t.currentStorage.disconnect=function(){var e=document.getElementById("dropbox");e.classList.remove("connected")},t.$emit("change-storage",t.currentStorage);var e=document.getElementById("dropbox");e.classList.add("connected")}),(function(e){console.log("fail to connect to Dropbox:",e)})))},onImport:function(e){var t=this,o=e.target.files[0];e.target.value="";var n=new FileReader;n.addEventListener("load",(function(){try{var o=JSON.parse(n.result);o&&t.$emit("import-board",{players:o.players,color:o.color})}catch(e){console.error(e)}})),n.readAsText(o)}},watch:{capture:function(){var e=h+Ce()+".png";console.log(e),Se(e,this.capture.image)},exportBoardData:function(){var e=m+Ce()+".txt",t=JSON.stringify(this.exportBoardData),o=URL.createObjectURL(new Blob([t],{type:"text/play"}));Se(e,o)},clearBoardList:function(){console.log("clear board list on localStorage"),ue.clear()},clearAccesskey:function(){console.log("clear access key"),be.clearAccesskey(),ge.clearAccesskey()}},created:function(){var e=this;window.googleInit=function(){console.log("gapi loaded"),ge.isAvailable((function(){e.isGoogleAvailable=!0}),(function(){e.isGoogleAvailable=!1}))}},mounted:function(){var e=this;switch(this.currentStorage=ue,this.currentStorage.fetch(),this.$emit("change-storage",this.currentStorage),be.startConnecting=function(){var e=document.getElementById("dropbox");e.classList.add("connecting")},be.endConnecting=function(){var e=document.getElementById("dropbox");e.classList.remove("connecting")},be.isAvailable()){case"available":this.isDropboxAvailable=!0;break;case"unavailable":this.isDropboxAvailable=!1;break;case"connected":this.isDropboxAvailable=!0,be.fetch((function(){console.log("connected to Dropbox"),e.currentStorage.disconnect&&e.currentStorage.disconnect(),e.currentStorage=be,e.currentStorage.disconnect=function(){var e=document.getElementById("dropbox");e.classList.remove("connected")},e.$emit("change-storage",e.currentStorage);var t=document.getElementById("dropbox");t.classList.add("connected")}),(function(e){console.log("fail to connect to Dropbox:",e)}));break}ge.startConnecting=function(){var e=document.getElementById("google");e.classList.add("connecting")},ge.endConnecting=function(){var e=document.getElementById("google");e.classList.remove("connecting")}}},xe=Ie,ke=(o("7e2f"),Object(L["a"])(xe,q,K,!1,null,"09de5e30",null)),_e=ke.exports,Te=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"modal-dialog"}},[o("div",{staticClass:"dialog-overlay"}),"saved-board"==e.type?o("div",{staticClass:"modal-container"},[o("div",{staticClass:"modal-close"},[o("div",[o("span",{on:{click:function(t){return e.$emit("close",{type:"close"})}}},[e._v("×")])])]),o("div",{staticClass:"modal-header"},[e._v(" "+e._s(e.board.timestamp)+" ")]),o("div",[o("img",{attrs:{src:e.board.icon}})]),o("div",{staticClass:"modal-button"},[o("div",{staticClass:"left-button"},[o("button",{staticClass:"default-button",on:{click:function(t){return e.$emit("close",{type:"open",index:e.board.index})}}},[e._v("Open")])]),o("div",{staticClass:"right-button"},[o("button",{staticClass:"default-button",on:{click:function(t){return e.$emit("close",{type:"delete",index:e.board.index})}}},[e._v("Delete")])])])]):e._e(),"open-new-board"==e.type?o("div",{staticClass:"modal-container"},[o("div",{staticClass:"modal-close"},[o("div",[o("span",{on:{click:function(t){return e.$emit("close",{type:"close"})}}},[e._v("×")])])]),o("div",{staticClass:"modal-header"},[e._v(" FORMATION ")]),o("div",{staticClass:"select-formation"},[o("div",{staticClass:"formation-list",attrs:{id:"left-team"}},[o("div",[o("span",{style:{color:e.board.homeColor}},[e._v("● ")]),e._v("HOME")]),e._l(e.formations,(function(t,n){return o("div",{key:"home"+n,staticClass:"formation",class:{selected:e.selected.home==n},on:{click:function(t){return e.clickFormation("home",n)}}},[e._v(" "+e._s(t)+" ")])}))],2),o("div",{staticClass:"formation-list",attrs:{id:"right-team"}},[o("div",[o("span",{style:{color:e.board.awayColor}},[e._v("● ")]),e._v("AWAY")]),e._l(e.formations,(function(t,n){return o("div",{key:"away"+n,staticClass:"formation",class:{selected:e.selected.away==n},on:{click:function(t){return e.clickFormation("away",n)}}},[e._v(" "+e._s(t)+" ")])}))],2)]),o("div",{staticClass:"modal-button"},[o("div",{staticClass:"center-button"},[o("button",{staticClass:"default-button",on:{click:e.clickOk}},[e._v("OK")])])])]):e._e(),"show-team-id"==e.type?o("div",{staticClass:"modal-container"},[o("div",{staticClass:"modal-close"},[o("div",[o("span",{on:{click:function(t){return e.$emit("close",{type:"close"})}}},[e._v("×")])])]),o("div",{staticClass:"modal-header"},[e._v(" Player DB teams list"),o("br"),e._v(" "+e._s(this.board.version)+" ")]),o("br"),o("span",{staticClass:"team-id",domProps:{innerHTML:e._s(e.board.teamHtml)}}),o("div",{staticClass:"modal-button"},[o("div",{staticClass:"center-button"},[o("button",{staticClass:"default-button",on:{click:function(t){return e.$emit("close",{type:"delete"})}}},[e._v(" DELETE PLAYER DB ")])])])]):e._e(),"clear-localstorage"==e.type?o("div",{staticClass:"modal-container"},[o("div",{staticClass:"modal-close"},[o("div",[o("span",{on:{click:function(t){return e.$emit("close",{type:"close"})}}},[e._v("×")])])]),e._m(0),o("div",{staticClass:"modal-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItems,expression:"checkedItems"}],attrs:{type:"checkbox",id:"all-board-list",name:"all-board-list",value:"board-list"},domProps:{checked:Array.isArray(e.checkedItems)?e._i(e.checkedItems,"board-list")>-1:e.checkedItems},on:{change:function(t){var o=e.checkedItems,n=t.target,a=!!n.checked;if(Array.isArray(o)){var r="board-list",i=e._i(o,r);n.checked?i<0&&(e.checkedItems=o.concat([r])):i>-1&&(e.checkedItems=o.slice(0,i).concat(o.slice(i+1)))}else e.checkedItems=a}}}),o("label",{attrs:{for:"all-board-list"}},[e._v("Clear all board list")]),o("br"),o("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItems,expression:"checkedItems"}],attrs:{type:"checkbox",id:"all-storage-accesskey",name:"all-storage-accesskey",value:"accesskey"},domProps:{checked:Array.isArray(e.checkedItems)?e._i(e.checkedItems,"accesskey")>-1:e.checkedItems},on:{change:function(t){var o=e.checkedItems,n=t.target,a=!!n.checked;if(Array.isArray(o)){var r="accesskey",i=e._i(o,r);n.checked?i<0&&(e.checkedItems=o.concat([r])):i>-1&&(e.checkedItems=o.slice(0,i).concat(o.slice(i+1)))}else e.checkedItems=a}}}),o("label",{attrs:{for:"all-storage-accesskey"}},[e._v("Clear storage access keys")]),o("br")]),o("div",[e._v("Are you sure?")]),o("div",{staticClass:"modal-button"},[o("div",{staticClass:"left-button"},[o("button",{staticClass:"default-button",on:{click:function(t){return e.$emit("close",{type:"clear",items:e.checkedItems})}}},[e._v(" YES ")])]),o("div",{staticClass:"right-button"},[o("button",{staticClass:"default-button",on:{click:function(t){return e.$emit("close",{type:"close"})}}},[e._v(" Cancel ")])])])]):e._e()])},Ee=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal-header"},[e._v(" Clear browser data"),o("br"),e._v(" (localStorage and cookie) ")])}],Be={props:{type:String,board:Object},data:function(){return{formations:S,selected:{home:0,away:0},checkedItems:[]}},methods:{clickFormation:function(e,t){this.selected[e]=t},clickOk:function(){var e=this.formations[this.selected.home],t=this.formations[this.selected.away];this.$emit("close",{type:"open",home:e,away:t})}}},Pe=Be,De=(o("22d7"),Object(L["a"])(Pe,Te,Ee,!1,null,null,null)),Oe=De.exports;function Ae(e){for(var t=[],o=0,n=0,a=2,r=w/a,s=_.BENCH.w/C/r,c=(_.BENCH.h+_.MARGIN.BOTTOM)/a*.93,l=0;l<C;l++)for(var d=s/2+_.BENCH.w/2*l,u=_.BENCH.TOP-_.MARGIN.BOTTOM+c/2,h=d,p=u,f=0;f<w;f++)f==r&&(h=d,p+=c),t.push({id:f,x:h,y:p,team:l,name:"",cx:o,cy:n,number:f+1}),h+=s;if(!e)return t;for(var g={left:_.MARGIN.LEFT,top:_.MARGIN.TOP,w:_.FIELD.w/2-2*_.PLAYER_SIZE,h:_.FIELD.h+_.MARGIN.TOP+_.MARGIN.BOTTOM},v=0;v<C;v++){var m=e[v].length;if(0!=m)for(var y=0,b=0;b<m;b++){var S=g.w/(m-1)*b+_.MARGIN.LEFT;1==v&&(S=_.WIDTH-S);for(var I=0;I<e[v][b];I++){var x=e[v][b]-1-I;1==v&&(x=I);var k,T=g.h/(e[v][b]+1)*(x+1),E=Object(i["a"])(t);try{for(E.s();!(k=E.n()).done;){var B=k.value;B.team==v&&B.id==y&&(B.x=S,B.y=T)}}catch(P){E.e(P)}finally{E.f()}y++}}}return t}var Le={newPlayers:Ae},Ne={name:"App",components:{Board:R,Lineup:G,Files:Y,Storage:_e,Modal:Oe},data:function(){return{colors:I,players:[],doCapture:{},doSave:{},storage:[],playerDB:null,showModal:!1,modalType:"saved-board",modalParam:{},capture:{image:""},exportBoardData:{},clearBoardList:{},clearAccesskey:{},hideSettings:!1}},methods:{saveToLocalStorage:function(){localStorage[p]=JSON.stringify({version:l,players:this.players,color:D(this.colors)})},updatePlayerPosition:function(e){this.players=e,this.saveToLocalStorage()},changeLineup:function(e,t){var o=this,n=e.split("\n\n"),a={};n.forEach((function(e,n){""!=e&&(a[n]=e.split("\n"),o.playerDB&&o.playerDB["teams"]&&o.playerDB["teams"][t[n]]&&(a[n].playerDB=o.playerDB["teams"][t[n]].players))})),this.players.forEach((function(e){if(a[e.team]&&a[e.team][e.id]){var t=a[e.team][e.id].split(",");e.number=t[0],e.name=t[1]}if(!e.name&&a[e.team]&&a[e.team].playerDB){var o=a[e.team].playerDB[e.number];o&&(e.name=o)}})),this.saveToLocalStorage()},changeTeamColors:function(e){this.colors=e,this.saveToLocalStorage()},changePlayerInfo:function(e,t,o){var n,a=Object(i["a"])(this.players);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.team==e.team&&r.id==e.id&&(r.number=t,r.name=o)}}catch(s){a.e(s)}finally{a.f()}this.saveToLocalStorage()},changeEnds:function(){var e,t=_.CENTERMARK.LEFT,o=_.CENTERMARK.TOP,n=Object(i["a"])(this.players);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.y<_.BENCH.TOP&&(a.x=2*t-a.x,a.y=2*o-a.y)}}catch(r){n.e(r)}finally{n.f()}this.players.splice(0,1,this.players[0]),this.saveToLocalStorage(),console.log("changeEnds")},loadPlayerDB:function(e){var t=this;console.log("loadPlayerDB"),this.storage.savePlayerDB(e,(function(){t.playerDB=e}))},showTeamId:function(){if(console.log("showTeamId"),this.playerDB){var e={};for(var t in this.playerDB.teams){var o=this.playerDB.teams[t].category;e[o]||(e[o]=[]),e[o].push(t)}var n="";for(var a in e){var r=33;n+="<div>".concat(a,"<div>");var s,c="",l=Object(i["a"])(e[a]);try{for(l.s();!(s=l.n()).done;){var d=s.value;c.length+d.length<r?c+=d+" ":(n+="<div>".concat(c,"</div>"),c=d+" ")}}catch(u){l.e(u)}finally{l.f()}n+="<div>".concat(c,"</div><br>")}this.modalType="show-team-id",this.modalParam={teamHtml:n,version:this.playerDB.version},this.showModal=!0}},saveBoard:function(){console.log("saved filed"),this.doSave={}},doneSave:function(e){this.storage.append(e)},closeModal:function(e){var t=this;if(this.showModal=!1,console.log("close modal"),"saved-board"===this.modalType&&("delete"===e.type&&this.storage.remove(e.index),"open"===e.type&&(this.players=this.storage[e.index].players,this.colors=P(this.storage[e.index].color))),"open-new-board"===this.modalType&&"open"===e.type){for(var o=[],n=0,a=["home","away"];n<a.length;n++){var r=a[n],i=e[r].split("-");"none"===i[0]?o.push([]):(i.unshift("1"),o.push(i.map(Number)))}this.players=Le.newPlayers(o),this.saveToLocalStorage()}if("show-team-id"===this.modalType&&"delete"===e.type&&(console.log("delete player db"),this.storage.deletePlayerDB((function(){t.playerDB=null}))),"clear-localstorage"===this.modalType&&"clear"===e.type)for(var s=0;s<e.items.length;s++)"board-list"===e.items[s]&&(console.log("clear board list"),this.clearBoardList={},this.playerDB=null,delete localStorage.lastField),"accesskey"===e.items[s]&&(console.log("clear access key"),this.clearAccesskey={})},onClickIcon:function(e){console.log(e),this.modalType="saved-board",this.modalParam={index:e,icon:this.storage[e].icon,timestamp:this.storage[e].timestamp},this.showModal=!0},openNewBoard:function(){console.log("openNewBoard"),this.modalType="open-new-board";var e=this.colors.split(",");this.modalParam={homeColor:e[0],awayColor:e[1]},this.showModal=!0},changeStorage:function(e){var t=this;console.log("changeStorage"),this.storage=e,e.playerDB?this.playerDB=e.playerDB:this.playerDB&&this.storage.savePlayerDB(this.playerDB,(function(){console.log("copy playerDB to storage")}),(function(){console.log("cannot copy playerDB to storage"),t.playerDB=null}))},captureBoard:function(){console.log("captured board"),this.doCapture={}},doneCapture:function(e){this.capture={image:e}},importBoard:function(e){this.players=e.players,this.colors=e.color},exportBoard:function(){console.log("export filed"),this.exportBoardData={version:l,players:this.players,color:this.colors}},clearLocalStorage:function(){console.log("claer localStorage"),this.modalType="clear-localstorage",this.showModal=!0}},created:function(){if(localStorage[p]){var e=JSON.parse(localStorage[p]);e.version==l?(this.players=e.players,this.colors=P(e.color)):console.log("check local storage version",e.version)}0==this.players.length&&(this.players=Le.newPlayers(null))},computed:{lineup:function(){var e,t=[Array(this.players.length),Array(this.players.length)],o=Object(i["a"])(this.players);try{for(o.s();!(e=o.n()).done;){var n=e.value;t[n.team][n.id]="".concat(n.number,",").concat(n.name)}}catch(d){o.e(d)}finally{o.f()}for(var a="",r=0;r<2;r++){var s,c=Object(i["a"])(t[r]);try{for(c.s();!(s=c.n()).done;){var l=s.value;l&&(a+=l+"\n")}}catch(d){c.e(d)}finally{c.f()}a+="\n"}return a}}},Re=Ne,He=(o("034f"),Object(L["a"])(Re,a,r,!1,null,null,null)),Me=He.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(Me)}}).$mount("#app")},"7b11":function(e,t,o){},"7e2f":function(e,t,o){"use strict";o("feb7")},"85ec":function(e,t,o){},be87:function(e,t,o){},c9e5:function(e,t,o){"use strict";o("e707")},e39a:function(e,t,o){"use strict";o("2e40")},e689:function(e,t,o){"use strict";o("7b11")},e707:function(e,t,o){},feb7:function(e,t,o){}});
//# sourceMappingURL=index.8ac949bf.js.map